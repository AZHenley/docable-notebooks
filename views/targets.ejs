<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Docable Notebook</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/github-markdown.css">
    <link rel="stylesheet" href="/css/notebook.css">
    <link rel="stylesheet" href="/css/menu.css">
    <link rel="stylesheet" href="/css/sticky-footer-navbar.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">

    <link rel="stylesheet" href="//cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>

    <script src="//cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script src="/js/font-awesome.min.js"></script>


    <style>
        /* th,tr,td {
            padding-left: 3px !important;
            padding-right: 3px !important;
        } */
    </style>
</head>

<body class="d-flex flex-column h-100">
    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="/">Docable</a>

            <%- include('templates/docable_menu'); -%>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse d-flex justify-content-end" id="navbarCollapse">
            </div>

        </nav>

    </header>

    <!-- Begin page content -->
    <main role="main" id="main" class="flex-shrink-0"  style="width: 85%; margin: 0 auto; padding: 45px;">

        <h2>Targets:</h2>

        <div id="dialog" title="Basic dialog">
            <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>

            <form id="add_target" action="/addTarget" method="POST">
                <input form="add_target" name="slug" class="form-control" type="text" placeholder="slug" aria-label="slug">
                <textarea form="add_target" name="sshKey" class="form-control" type="text" placeholder="ssh key for this target" aria-label="ssh key"></textarea>
                <input form="add_target" name="username" class="form-control" type="text" placeholder="username" aria-label="username">
                <input form="add_target" name="ip" class="form-control" type="text" placeholder="x.x.x.x" aria-label="ip address">
                <input form="add_target" name="port" class="form-control" type="text" placeholder="port" aria-label="port">
    
                <button class="btn btn-outline-success" type="submit">Add</button>
            </form>
        </div>
           
        <div class="container-fluid">
            <table class="table" id="example" style="width: 100%; text-align: center;">
                <thead>
                    <tr>
                        <th>Slug</th>
                        <th>ssh key</th>
                        <th>username</th>
                        <th>ip</th>
                        <th>port</th>
                        <th>Edit / Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% targets.forEach(t => { %>
                        <tr>
                            <td>
                                    <%= t.slug %>
                            </td>
                            <td>
                                    <!-- <%= t.sshKey %> -->
                                    *****
                            </td>
                            <td>
                                <%= t.username %>
                            </td>
                            <td>
                                <%= t.ip %>
                            </td>
                            <td>
                                <%= t.port %>
                            </td>
                            <td>
                                <a href="" class="editor_edit">Edit</a> / <a href="" class="editor_remove">Delete</a>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>

    <script>
           
    

    $(document).ready(function() {
 
    // New record
    $('a.editor_create').on('click', function (e) {
        e.preventDefault();
 
        editor.create( {
            title: 'Create new record',
            buttons: 'Add'
        } );
    } );
 
    // Edit record
    $('#example').on('click', 'a.editor_edit', function (e) {
        e.preventDefault();
 
        let row = $(this).closest('tr');

        $( "#dialog" ).dialog("open");
    } );

    // Edit dialog
    $( "#dialog" ).dialog({
        closeOnEscape: true,
        modal: true,
        // position: 'top',
        // width: 800,
        // height: 600,
        show: "blind",
        hide: "explode",
        autoOpen: false  ///added this line
    });
 
    // Delete a record
    $('#example').on('click', 'a.editor_remove', function (e) {
        e.preventDefault();
 
        editor.remove( $(this).closest('tr'), {
            title: 'Delete record',
            message: 'Are you sure you wish to remove this record?',
            buttons: 'Delete'
        } );
    } );
 
    $('#example').DataTable();
} );


        </script>
    </main>

    <%- include('templates/footer_analytics'); -%>
    
</body>

</html>
